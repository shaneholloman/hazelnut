---
import Layout from '../layouts/Layout.astro';

const baseUrl = import.meta.env.BASE_URL;
---

<Layout title="Documentation - Hazelnut">
  <div class="docs-layout">
    <aside class="docs-sidebar">
      <nav class="docs-nav">
        <h3>Getting Started</h3>
        <ul>
          <li><a href="#installation">Installation</a></li>
          <li><a href="#quick-start">Quick Start</a></li>
          <li><a href="#architecture">Architecture</a></li>
          <li><a href="#daemon-commands">Daemon Commands</a></li>
        </ul>

        <h3>Configuration</h3>
        <ul>
          <li><a href="#config-file">Config File</a></li>
          <li><a href="#general-settings">General Settings</a></li>
          <li><a href="#watch-folders">Watch Folders</a></li>
        </ul>

        <h3>Rules</h3>
        <ul>
          <li><a href="#conditions">Conditions</a></li>
          <li><a href="#actions">Actions</a></li>
          <li><a href="#examples">Examples</a></li>
        </ul>

        <h3>TUI</h3>
        <ul>
          <li><a href="#tui-overview">Overview</a></li>
          <li><a href="#keyboard-shortcuts">Keyboard Shortcuts</a></li>
        </ul>
      </nav>
    </aside>

    <div class="docs-content">
      <div class="docs-header">
        <h1>Documentation</h1>
        <p>Everything you need to know about using Hazelnut to organize your files.</p>
      </div>

      <section id="installation">
        <h2>Installation</h2>

        <h3>macOS</h3>
        <p>The fastest way to install on macOS ‚Äî uses pre-built binaries:</p>

        <div class="code-block">
          <div class="code-header">
            <span>Homebrew (Recommended)</span>
            <button class="copy-btn" data-copy="brew install ricardodantas/tap/hazelnut">Copy</button>
          </div>
          <pre><code>brew install ricardodantas/tap/hazelnut</code></pre>
        </div>

        <h3>Linux</h3>
        <p>Homebrew works on Linux too, or use Cargo:</p>

        <div class="code-block">
          <div class="code-header">
            <span>Homebrew</span>
            <button class="copy-btn" data-copy="brew install ricardodantas/tap/hazelnut">Copy</button>
          </div>
          <pre><code>brew install ricardodantas/tap/hazelnut</code></pre>
        </div>

        <div class="code-block">
          <div class="code-header">
            <span>Cargo</span>
            <button class="copy-btn" data-copy="cargo install hazelnut">Copy</button>
          </div>
          <pre><code>cargo install hazelnut</code></pre>
        </div>

        <h3>Windows</h3>
        <p>Install via Cargo or download the pre-built binary:</p>

        <div class="code-block">
          <div class="code-header">
            <span>Cargo</span>
            <button class="copy-btn" data-copy="cargo install hazelnut">Copy</button>
          </div>
          <pre><code>cargo install hazelnut</code></pre>
        </div>

        <p>Or download <code>hazelnut-*-x86_64-pc-windows-msvc.zip</code> from <a href="https://github.com/ricardodantas/hazelnut/releases">GitHub Releases</a>.</p>

        <div class="callout warning">
          <strong>‚ö†Ô∏è Note:</strong> The daemon (<code>hazelnutd</code>) is only available on macOS and Linux. On Windows, only the TUI is available.
        </div>

        <h3>From Source</h3>

        <div class="code-block">
          <div class="code-header">
            <span>Build from source</span>
            <button class="copy-btn" data-copy="git clone https://github.com/ricardodantas/hazelnut.git
cd hazelnut
cargo build --release">Copy</button>
          </div>
          <pre><code>git clone https://github.com/ricardodantas/hazelnut.git
cd hazelnut
cargo build --release</code></pre>
        </div>

        <h3>Requirements</h3>
        <ul>
          <li>Rust 1.93+ (only for Cargo/source installation)</li>
          <li>macOS, Linux, or Windows</li>
        </ul>
      </section>

      <section id="quick-start">
        <h2>Quick Start</h2>

        <div class="callout warning">
          <strong>‚ö†Ô∏è Important:</strong> Hazelnut needs <strong>two things</strong> to work:
          <ol>
            <li><strong>Watch folders</strong> ‚Äî which directories to monitor</li>
            <li><strong>Rules</strong> ‚Äî what to do with files in those folders</li>
          </ol>
          Rules alone won't do anything without at least one watch folder configured!
        </div>

        <p>Get up and running in these steps:</p>

        <div class="numbered-steps">
          <div class="numbered-step">
            <span class="number">1</span>
            <div>
              <h4>Configure watches and rules</h4>
              <p>Edit <code>~/.config/hazelnut/config.toml</code>:</p>
              <div class="code-block inline">
                <pre><code># Watch your Downloads folder
[[watch]]
path = "/home/youruser/Downloads"

# Move PDFs to Documents
[[rule]]
name = "Organize PDFs"
[rule.condition]
extension = "pdf"
[rule.action]
type = "move"
destination = "/home/youruser/Documents/PDFs"</code></pre>
              </div>
              <p class="note">üí° Use full paths ‚Äî the <code>~</code> shortcut is not expanded.</p>
            </div>
          </div>

          <div class="numbered-step">
            <span class="number">2</span>
            <div>
              <h4>Start the daemon</h4>
              <p>The daemon runs in the background, watching folders and applying rules:</p>
              <div class="code-block inline">
                <pre><code>hazelnutd start</code></pre>
                <button class="copy-btn small" data-copy="hazelnutd start">Copy</button>
              </div>
            </div>
          </div>

          <div class="numbered-step">
            <span class="number">3</span>
            <div>
              <h4>Launch the TUI</h4>
              <p>Open the terminal interface to manage rules and monitor activity:</p>
              <div class="code-block inline">
                <pre><code>hazelnut</code></pre>
                <button class="copy-btn small" data-copy="hazelnut">Copy</button>
              </div>
            </div>
          </div>
        </div>
      </section>

      <section id="architecture">
        <h2>Architecture</h2>
        <p>Hazelnut consists of two main components:</p>

        <div class="info-cards">
          <div class="info-card">
            <h4><code>hazelnut</code></h4>
            <p>The TUI (Terminal User Interface) for managing rules, viewing logs, and monitoring file organization activity.</p>
          </div>
          <div class="info-card">
            <h4><code>hazelnutd</code></h4>
            <p>The background daemon that watches folders and applies rules in real-time. Communicates with the TUI via Unix socket.</p>
          </div>
        </div>
      </section>

      <section id="daemon-commands">
        <h2>Daemon Commands</h2>
        <p>The <code>hazelnutd</code> daemon runs in the background and processes file events 24/7.</p>
        
        <div class="table-wrapper">
          <table>
            <thead>
              <tr>
                <th>Command</th>
                <th>Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><code>hazelnutd start</code></td>
                <td>Start daemon in background, detached from terminal</td>
              </tr>
              <tr>
                <td><code>hazelnutd stop</code></td>
                <td>Gracefully stop the daemon</td>
              </tr>
              <tr>
                <td><code>hazelnutd restart</code></td>
                <td>Stop and start the daemon</td>
              </tr>
              <tr>
                <td><code>hazelnutd status</code></td>
                <td>Show running state, PID, uptime, and log location</td>
              </tr>
              <tr>
                <td><code>hazelnutd reload</code></td>
                <td>Hot-reload configuration without restarting</td>
              </tr>
              <tr>
                <td><code>hazelnutd run</code></td>
                <td>Run in foreground with live logging (for debugging)</td>
              </tr>
            </tbody>
          </table>
        </div>

        <h3>Status Output</h3>
        <div class="code-block">
          <pre><code>{`$ hazelnutd status
üå∞ Hazelnut daemon is running
   PID: 12345
   PID file: /run/user/1000/hazelnutd.pid
   Log file: ~/.local/state/hazelnut/hazelnutd.log
   Uptime: 2h 15m 30s`}</code></pre>
        </div>

        <h3>File Locations</h3>
        <div class="table-wrapper">
          <table>
            <thead>
              <tr>
                <th>File</th>
                <th>Path</th>
                <th>Purpose</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>PID file</td>
                <td><code>$XDG_RUNTIME_DIR/hazelnutd.pid</code></td>
                <td>Tracks running daemon process</td>
              </tr>
              <tr>
                <td>Log file</td>
                <td><code>~/.local/state/hazelnut/hazelnutd.log</code></td>
                <td>Daemon activity log</td>
              </tr>
              <tr>
                <td>Config</td>
                <td><code>~/.config/hazelnut/config.toml</code></td>
                <td>Rules and watch configuration</td>
              </tr>
            </tbody>
          </table>
        </div>

        <div class="callout info">
          <strong>üí° Hot Reload:</strong> After editing your config file, run <code>hazelnutd reload</code> to apply changes without restarting the daemon!
        </div>
      </section>

      <section id="config-file">
        <h2>Config File</h2>
        <p>Hazelnut uses TOML for configuration. The config file is always located at:</p>
        <div class="code-block inline">
          <pre><code>~/.config/hazelnut/config.toml</code></pre>
        </div>

        <p>Here's a complete example configuration:</p>

        <div class="code-block">
          <div class="code-header">
            <span>config.toml</span>
            <button class="copy-btn" data-copy={`[general]
log_level = "info"
log_file = "~/.local/share/hazelnut/hazelnut.log"
dry_run = false
debounce_seconds = 2

# Watch folders
[[watch]]
path = "~/Downloads"
recursive = false

[[watch]]
path = "~/Desktop"
recursive = false

# Rules
[[rule]]
name = "Move PDFs"
enabled = true

[rule.condition]
extension = "pdf"

[rule.action]
type = "move"
destination = "~/Documents/PDFs"`}>Copy</button>
          </div>
          <pre><code>{`[general]
log_level = "info"
log_file = "~/.local/share/hazelnut/hazelnut.log"
dry_run = false
debounce_seconds = 2

# Watch folders
[[watch]]
path = "~/Downloads"
recursive = false

[[watch]]
path = "~/Desktop"
recursive = false

# Rules
[[rule]]
name = "Move PDFs"
enabled = true

[rule.condition]
extension = "pdf"

[rule.action]
type = "move"
destination = "~/Documents/PDFs"`}</code></pre>
        </div>
      </section>

      <section id="general-settings">
        <h2>General Settings</h2>

        <div class="table-wrapper">
          <table>
            <thead>
              <tr>
                <th>Setting</th>
                <th>Type</th>
                <th>Default</th>
                <th>Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><code>log_level</code></td>
                <td>string</td>
                <td><code>"info"</code></td>
                <td>Logging level (trace, debug, info, warn, error)</td>
              </tr>
              <tr>
                <td><code>log_file</code></td>
                <td>string</td>
                <td>none</td>
                <td>Path to log file</td>
              </tr>
              <tr>
                <td><code>dry_run</code></td>
                <td>bool</td>
                <td><code>false</code></td>
                <td>Preview actions without executing</td>
              </tr>
              <tr>
                <td><code>debounce_seconds</code></td>
                <td>int</td>
                <td><code>2</code></td>
                <td>Wait time before processing a file</td>
              </tr>
            </tbody>
          </table>
        </div>
      </section>

      <section id="watch-folders">
        <h2>Watch Folders</h2>
        <p>Configure which directories Hazelnut monitors for changes:</p>

        <div class="callout info">
          <strong>üí° TUI Tip:</strong> You can manage watches directly in the terminal interface! Press <kbd>a</kbd> to add, <kbd>e</kbd> to edit, <kbd>d</kbd> to delete.
        </div>

        <div class="code-block">
          <pre><code>{`[[watch]]
path = "/home/user/Downloads"  # Use full paths
recursive = false
rules = []  # Empty = all rules apply`}</code></pre>
        </div>

        <div class="table-wrapper">
          <table>
            <thead>
              <tr>
                <th>Field</th>
                <th>Type</th>
                <th>Default</th>
                <th>Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><code>path</code></td>
                <td>string</td>
                <td>required</td>
                <td>Directory to watch (use full paths, ~ not expanded)</td>
              </tr>
              <tr>
                <td><code>recursive</code></td>
                <td>bool</td>
                <td><code>false</code></td>
                <td>Watch subdirectories</td>
              </tr>
              <tr>
                <td><code>rules</code></td>
                <td>array</td>
                <td><code>[]</code></td>
                <td>Rule names to apply (empty = all)</td>
              </tr>
            </tbody>
          </table>
        </div>

        <h3>Watch Editor Keybindings</h3>
        <div class="table-wrapper">
          <table>
            <thead>
              <tr>
                <th>Key</th>
                <th>Action</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><kbd>a</kbd> / <kbd>n</kbd></td>
                <td>Add new watch folder</td>
              </tr>
              <tr>
                <td><kbd>e</kbd></td>
                <td>Edit selected watch</td>
              </tr>
              <tr>
                <td><kbd>d</kbd></td>
                <td>Delete selected watch</td>
              </tr>
            </tbody>
          </table>
        </div>
      </section>

      <section id="conditions">
        <h2>Conditions</h2>
        <p>All conditions must match for a rule to apply. Omit conditions you don't need.</p>

        <h3>File Name</h3>
        <div class="code-block">
          <pre><code>{`[rule.condition]
name_matches = "Screenshot*.png"  # Glob pattern
name_regex = "^invoice_\\\\d+\\\\.pdf$"  # Regex pattern`}</code></pre>
        </div>

        <h3>File Type</h3>
        <div class="code-block">
          <pre><code>{`[rule.condition]
extension = "pdf"  # Single extension
extensions = ["jpg", "jpeg", "png", "gif"]  # Multiple
is_directory = false
is_hidden = true  # Files starting with .`}</code></pre>
        </div>

        <h3>File Size</h3>
        <div class="code-block">
          <pre><code>{`[rule.condition]
size_greater_than = 10485760  # > 10 MB (in bytes)
size_less_than = 1048576  # < 1 MB`}</code></pre>
        </div>

        <h3>File Age</h3>
        <div class="code-block">
          <pre><code>{`[rule.condition]
age_days_greater_than = 30  # Older than 30 days
age_days_less_than = 7  # Newer than 7 days`}</code></pre>
        </div>
      </section>

      <section id="actions">
        <h2>Actions</h2>

        <h3>Move</h3>
        <div class="code-block">
          <pre><code>{`[rule.action]
type = "move"
destination = "~/Documents/PDFs"
create_destination = true  # Create folder if missing
overwrite = false  # Don't overwrite existing files`}</code></pre>
        </div>

        <h3>Copy</h3>
        <div class="code-block">
          <pre><code>{`[rule.action]
type = "copy"
destination = "~/Backup"
create_destination = true
overwrite = false`}</code></pre>
        </div>

        <h3>Rename</h3>
        <div class="code-block">
          <pre><code>{`[rule.action]
type = "rename"
pattern = "{date}_{name}.{ext}"`}</code></pre>
        </div>

        <p>Available pattern variables:</p>
        <ul>
          <li><code>{`{name}`}</code> - Filename without extension</li>
          <li><code>{`{filename}`}</code> - Full filename</li>
          <li><code>{`{ext}`}</code> - Extension</li>
          <li><code>{`{path}`}</code> - Full path</li>
          <li><code>{`{dir}`}</code> - Parent directory</li>
          <li><code>{`{date}`}</code> - Current date (YYYY-MM-DD)</li>
          <li><code>{`{datetime}`}</code> - Current datetime</li>
          <li><code>{`{date:FORMAT}`}</code> - Custom date format</li>
        </ul>

        <h3>Trash / Delete</h3>
        <div class="code-block">
          <pre><code>{`[rule.action]
type = "trash"  # Safe, recoverable

# Or permanently delete (‚ö†Ô∏è dangerous!)
type = "delete"`}</code></pre>
        </div>

        <h3>Run Command</h3>
        <div class="code-block">
          <pre><code>{`[rule.action]
type = "run"
command = "convert"
args = ["{path}", "-resize", "50%", "{dir}/{name}_small.{ext}"]`}</code></pre>
        </div>

        <h3>Archive</h3>
        <div class="code-block">
          <pre><code>{`[rule.action]
type = "archive"
destination = "~/Archives"
delete_original = false`}</code></pre>
        </div>
      </section>

      <section id="examples">
        <h2>Examples</h2>

        <h3>Organize Screenshots</h3>
        <div class="code-block">
          <pre><code>{`[[rule]]
name = "Screenshots"

[rule.condition]
name_matches = "Screenshot*.png"

[rule.action]
type = "move"
destination = "~/Pictures/Screenshots"`}</code></pre>
        </div>

        <h3>Clean Old Downloads</h3>
        <div class="code-block">
          <pre><code>{`[[rule]]
name = "Clean old downloads"

[rule.condition]
age_days_greater_than = 30
extensions = ["tmp", "log", "bak"]

[rule.action]
type = "trash"`}</code></pre>
        </div>

        <h3>Sort Media Files</h3>
        <div class="code-block">
          <pre><code>{`[[rule]]
name = "Sort Images"

[rule.condition]
extensions = ["jpg", "jpeg", "png", "gif", "webp"]

[rule.action]
type = "move"
destination = "~/Pictures/Unsorted"

[[rule]]
name = "Sort Videos"

[rule.condition]
extensions = ["mp4", "mov", "avi", "mkv"]

[rule.action]
type = "move"
destination = "~/Videos/Unsorted"`}</code></pre>
        </div>

        <h3>Date-Prefix Invoices</h3>
        <div class="code-block">
          <pre><code>{`[[rule]]
name = "Date prefix invoices"

[rule.condition]
name_matches = "invoice*.pdf"

[rule.action]
type = "rename"
pattern = "{date:YYYY-MM-DD}_{name}.{ext}"`}</code></pre>
        </div>
      </section>

      <section id="tui-overview">
        <h2>TUI Overview</h2>
        <p>The TUI provides a beautiful interface for managing Hazelnut. Launch it with:</p>

        <div class="code-block inline">
          <pre><code>hazelnut</code></pre>
          <button class="copy-btn small" data-copy="hazelnut">Copy</button>
        </div>

        <div class="screenshot-gallery">
          <figure>
            <img src={`${baseUrl}screenshots/01-dashboard.png`} alt="Dashboard view" loading="lazy" />
            <figcaption>Dashboard - Overview of daemon status and recent activity</figcaption>
          </figure>
          <figure>
            <img src={`${baseUrl}screenshots/05-rules.png`} alt="Rules view" loading="lazy" />
            <figcaption>Rules - Manage your file organization rules</figcaption>
          </figure>
          <figure>
            <img src={`${baseUrl}screenshots/07-log.png`} alt="Log view" loading="lazy" />
            <figcaption>Log - View recent file operations</figcaption>
          </figure>
        </div>
      </section>

      <section id="keyboard-shortcuts">
        <h2>Keyboard Shortcuts</h2>

        <h3>Navigation</h3>
        <div class="table-wrapper">
          <table>
            <thead>
              <tr>
                <th>Key</th>
                <th>Action</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><kbd>?</kbd></td>
                <td>Show help</td>
              </tr>
              <tr>
                <td><kbd>q</kbd></td>
                <td>Quit</td>
              </tr>
              <tr>
                <td><kbd>1-4</kbd></td>
                <td>Switch tabs (Dashboard, Rules, Watches, Log)</td>
              </tr>
              <tr>
                <td><kbd>Tab</kbd></td>
                <td>Next tab</td>
              </tr>
              <tr>
                <td><kbd>j/k</kbd> or <kbd>‚Üë/‚Üì</kbd></td>
                <td>Navigate list</td>
              </tr>
              <tr>
                <td><kbd>g/G</kbd></td>
                <td>Go to first/last item</td>
              </tr>
            </tbody>
          </table>
        </div>

        <h3>Rules View</h3>
        <div class="table-wrapper">
          <table>
            <thead>
              <tr>
                <th>Key</th>
                <th>Action</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><kbd>n</kbd></td>
                <td>Create new rule</td>
              </tr>
              <tr>
                <td><kbd>e</kbd></td>
                <td>Edit selected rule</td>
              </tr>
              <tr>
                <td><kbd>d</kbd></td>
                <td>Delete selected rule</td>
              </tr>
              <tr>
                <td><kbd>Enter</kbd> / <kbd>Space</kbd></td>
                <td>Toggle rule enabled/disabled</td>
              </tr>
            </tbody>
          </table>
        </div>

        <h3>General</h3>
        <div class="table-wrapper">
          <table>
            <thead>
              <tr>
                <th>Key</th>
                <th>Action</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><kbd>t</kbd></td>
                <td>Open theme picker</td>
              </tr>
              <tr>
                <td><kbd>s</kbd></td>
                <td>Open settings</td>
              </tr>
              <tr>
                <td><kbd>A</kbd></td>
                <td>About dialog</td>
              </tr>
            </tbody>
          </table>
        </div>

        <h3>Watches View</h3>
        <div class="table-wrapper">
          <table>
            <thead>
              <tr>
                <th>Key</th>
                <th>Action</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><kbd>a</kbd> / <kbd>n</kbd></td>
                <td>Add new watch</td>
              </tr>
              <tr>
                <td><kbd>e</kbd></td>
                <td>Edit selected watch</td>
              </tr>
              <tr>
                <td><kbd>d</kbd></td>
                <td>Delete selected watch</td>
              </tr>
            </tbody>
          </table>
        </div>

        <h3>Rule Editor / Watch Editor</h3>
        <div class="table-wrapper">
          <table>
            <thead>
              <tr>
                <th>Key</th>
                <th>Action</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><kbd>Tab</kbd></td>
                <td>Next field</td>
              </tr>
              <tr>
                <td><kbd>Shift+Tab</kbd></td>
                <td>Previous field</td>
              </tr>
              <tr>
                <td><kbd>Enter</kbd></td>
                <td>Save</td>
              </tr>
              <tr>
                <td><kbd>Esc</kbd></td>
                <td>Cancel</td>
              </tr>
            </tbody>
          </table>
        </div>
      </section>
    </div>
  </div>
</Layout>

<style>
  .callout {
    padding: 1rem 1.25rem;
    border-radius: 8px;
    margin: 1.5rem 0;
  }

  .callout.warning {
    background: rgba(250, 179, 135, 0.1);
    border-left: 4px solid var(--primary);
  }

  .callout.info {
    background: rgba(137, 180, 250, 0.1);
    border-left: 4px solid #89b4fa;
  }

  .callout ol {
    margin: 0.75rem 0 0 1.25rem;
    padding: 0;
  }

  .callout li {
    margin: 0.25rem 0;
  }

  .note {
    font-size: 0.9rem;
    color: var(--text-secondary);
    margin-top: 0.5rem;
  }

  .docs-layout {
    display: flex;
    padding-top: var(--nav-height);
    min-height: calc(100vh - var(--nav-height));
  }

  .docs-sidebar {
    width: 260px;
    flex-shrink: 0;
    background: var(--bg-secondary);
    border-right: 1px solid var(--bg-tertiary);
    position: sticky;
    top: var(--nav-height);
    height: calc(100vh - var(--nav-height));
    overflow-y: auto;
    padding: 2rem 1.5rem;
  }

  .docs-nav h3 {
    font-size: 0.75rem;
    text-transform: uppercase;
    letter-spacing: 0.1em;
    color: var(--text-secondary);
    margin-top: 1.5rem;
    margin-bottom: 0.75rem;
  }

  .docs-nav h3:first-child {
    margin-top: 0;
  }

  .docs-nav ul {
    list-style: none;
  }

  .docs-nav li {
    margin-bottom: 0.5rem;
  }

  .docs-nav a {
    color: var(--text-primary);
    font-size: 0.9rem;
    opacity: 0.8;
    transition: opacity 0.2s, color 0.2s;
  }

  .docs-nav a:hover {
    opacity: 1;
    color: var(--accent-purple);
  }

  .docs-content {
    flex: 1;
    max-width: 900px;
    padding: 3rem 4rem;
  }

  .docs-header {
    margin-bottom: 3rem;
    padding-bottom: 2rem;
    border-bottom: 1px solid var(--bg-tertiary);
  }

  .docs-header h1 {
    font-size: 2.5rem;
    margin-bottom: 0.5rem;
  }

  .docs-header p {
    color: var(--text-secondary);
    font-size: 1.125rem;
  }

  section {
    margin-bottom: 4rem;
    scroll-margin-top: calc(var(--nav-height) + 2rem);
  }

  section h2 {
    font-size: 1.75rem;
    margin-bottom: 1rem;
    text-align: left;
    padding-bottom: 0.5rem;
    border-bottom: 1px solid var(--bg-tertiary);
  }

  section h3 {
    font-size: 1.25rem;
    margin-top: 2rem;
    margin-bottom: 0.75rem;
    color: var(--accent-cyan);
  }

  section h4 {
    font-size: 1rem;
    margin-bottom: 0.5rem;
  }

  section p {
    margin-bottom: 1rem;
    color: var(--text-secondary);
  }

  section ul {
    margin-bottom: 1rem;
    padding-left: 1.5rem;
    color: var(--text-secondary);
  }

  section li {
    margin-bottom: 0.5rem;
  }

  .code-block {
    background: var(--bg-secondary);
    border: 1px solid var(--bg-tertiary);
    border-radius: 8px;
    margin-bottom: 1.5rem;
    overflow: hidden;
  }

  .code-block.inline {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.5rem 1rem;
    margin-bottom: 1rem;
  }

  .code-block.inline pre {
    padding: 0;
    margin: 0;
    background: none;
    border: none;
  }

  .code-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0.5rem 1rem;
    background: var(--bg-tertiary);
    font-size: 0.8rem;
    color: var(--text-secondary);
  }

  .code-block pre {
    margin: 0;
    padding: 1rem;
    border: none;
    border-radius: 0;
  }

  .copy-btn {
    background: var(--bg-primary);
    border: none;
    color: var(--text-secondary);
    padding: 0.25rem 0.5rem;
    border-radius: 4px;
    cursor: pointer;
    font-size: 0.75rem;
    font-family: var(--font-sans);
    transition: all 0.2s;
  }

  .copy-btn:hover {
    background: var(--accent-purple);
    color: var(--bg-primary);
  }

  .copy-btn.small {
    padding: 0.2rem 0.4rem;
    font-size: 0.7rem;
  }

  .table-wrapper {
    overflow-x: auto;
    margin-bottom: 1.5rem;
  }

  table {
    width: 100%;
    border-collapse: collapse;
    font-size: 0.9rem;
  }

  th, td {
    text-align: left;
    padding: 0.75rem 1rem;
    border-bottom: 1px solid var(--bg-tertiary);
  }

  th {
    background: var(--bg-secondary);
    color: var(--text-secondary);
    font-weight: 600;
    text-transform: uppercase;
    font-size: 0.75rem;
    letter-spacing: 0.05em;
  }

  td {
    color: var(--text-primary);
  }

  td code {
    font-size: 0.8rem;
  }

  kbd {
    background: var(--bg-tertiary);
    border: 1px solid var(--text-secondary);
    border-radius: 4px;
    padding: 0.2em 0.5em;
    font-family: var(--font-mono);
    font-size: 0.85em;
  }

  .numbered-steps {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
    margin-top: 1.5rem;
  }

  .numbered-step {
    display: flex;
    gap: 1.5rem;
    align-items: flex-start;
  }

  .numbered-step .number {
    width: 32px;
    height: 32px;
    background: var(--accent-purple);
    color: var(--bg-primary);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 700;
    flex-shrink: 0;
  }

  .info-cards {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 1rem;
    margin-top: 1rem;
  }

  .info-card {
    background: var(--bg-secondary);
    padding: 1.5rem;
    border-radius: 8px;
    border: 1px solid var(--bg-tertiary);
  }

  .info-card h4 {
    color: var(--accent-green);
    margin-bottom: 0.5rem;
  }

  .info-card p {
    margin: 0;
    font-size: 0.9rem;
  }

  .screenshot-gallery {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 1.5rem;
    margin-top: 1.5rem;
  }

  .screenshot-gallery figure {
    margin: 0;
  }

  .screenshot-gallery img {
    width: 100%;
    border-radius: 8px;
    border: 1px solid var(--bg-tertiary);
  }

  .screenshot-gallery figcaption {
    margin-top: 0.75rem;
    font-size: 0.875rem;
    color: var(--text-secondary);
    text-align: center;
  }

  @media (max-width: 1024px) {
    .docs-sidebar {
      display: none;
    }

    .docs-content {
      padding: 2rem 1.5rem;
    }
  }

  @media (max-width: 768px) {
    .docs-content {
      padding: 1.5rem 1rem;
    }

    .numbered-step {
      flex-direction: column;
      gap: 0.75rem;
    }

    .screenshot-gallery {
      grid-template-columns: 1fr;
    }

    pre {
      font-size: 0.75rem;
      padding: 0.75rem;
    }

    h1 {
      font-size: 2rem;
    }

    h2 {
      font-size: 1.5rem;
    }

    h3 {
      font-size: 1.25rem;
    }

    table {
      display: block;
      overflow-x: auto;
      font-size: 0.875rem;
    }

    .keybindings-section table td:first-child {
      white-space: nowrap;
    }
  }
</style>

<script>
  // Copy to clipboard functionality
  document.querySelectorAll('.copy-btn').forEach(btn => {
    btn.addEventListener('click', async () => {
      const text = btn.getAttribute('data-copy');
      if (!text) return;

      try {
        await navigator.clipboard.writeText(text);
        const originalText = btn.textContent;
        btn.textContent = 'Copied!';
        btn.style.background = 'var(--accent-green)';
        btn.style.color = 'var(--bg-primary)';

        setTimeout(() => {
          btn.textContent = originalText;
          btn.style.background = '';
          btn.style.color = '';
        }, 2000);
      } catch (err) {
        console.error('Failed to copy:', err);
      }
    });
  });
</script>
